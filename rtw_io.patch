--- rtw_io.h.orig	2011-06-14 00:36:38.958789494 -0300
+++ rtw_io.h	2011-06-14 00:37:21.271893598 -0300
@@ -33,7 +33,9 @@
 #include <linux/semaphore.h>
 #endif
 #include <linux/list.h>
+#if (LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,38))
 #include <linux/smp_lock.h>
+#endif
 #include <linux/spinlock.h>
 #include <asm/atomic.h>
 
